# Simpsons: Hit & Run API

> This code is in a pre-pre-pre-alpha experimental state.

This is a library to allow automating and manipulating the game Simpsons: Hit &
Run with JavaScript. It uses the frida library to instrument and access
internal state.

Want to see it in action? Here is an early demo video.

[![Video](doc/video.png)](https://www.youtube.com/watch?v=cpmvSQ2l3Nc)

# Installation

You need [frida](https://frida.re/) intalled, if you already have python it
couldn't be easier, something like:

```
pip install frida-tools
```

The full frida install documentation is
[here](https://www.frida.re/docs/installation/) if you need it.

> Note: You must be using python for Windows, not WSL python.

Now just type

```
$ make
```

You need `typescript` and `rollup` to build the script, or you can just use a
prebuilt version. Typescript makes it easier to manage all the classes,
otherwise it's too easy make a mistake.

The code generated by the typescript compiler can be interacted with
JavaScript, you can use either.

I use WSL, I'll make the build easier.


# Usage

Run the game `Simpsons.exe`, you can use the launcher if you like, and type this:


```bash
python.exe inject.py Simpsons.exe
```

If you don't get any error messages, then frida was started and was injected
into the game. To interact with it, open chrome and go to `chrome://inspect`
and click the `Open dedicated DevTools for Node` link.

You should now have a JavaScript console connected.

Try it out!

Type this:

```javascript
CoinManager.SpawnInstantCoins(0, 0, 0, 10)
```

Some coins should fly towards you.

Get into a car, and type this:

```javascript
var v = (new Character()).GetVehicle()
var p = v.GetPosition()

// p is [x, y, z] co-ordinates of the car.
p.z += 10

v.SetPosition(p)
```

Your car should jump 100 ft in the air.


If yout want to write a script, take a look at the examples.

# Notes

I'm using the binary with md5 `9009afe5ab6c2daf8605d8b613951902`.


